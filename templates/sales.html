<!DOCTYPE html>
<html>
<head>
<title>Sales History</title>
<style>
body{
    margin:0;
    font-family:Segoe UI;
    background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    color:white;
}
.container{width:90%;margin:auto;padding:20px;}
.dashboard-row{display:flex;gap:20px;margin-bottom:20px;flex-wrap:wrap;}
.dashboard-box{
    flex:1;
    min-width:200px;
    background:rgba(255,255,255,0.1);
    padding:20px;
    border-radius:12px;
    text-align:center;
}
table{
    width:100%;
    border-collapse:collapse;
}
th,td{
    padding:10px;
    text-align:center;
}
th{background:rgba(255,255,255,0.2);}
td{background:rgba(255,255,255,0.05);}
button{
    padding:6px 12px;
    border:none;
    border-radius:5px;
    cursor:pointer;
}
</style>
</head>
<body>
<div class="container">

<a href="/"><button style="background:#00c896;color:white;">Back to Dashboard</button></a>

<h2>Sales History</h2>

<a href="/export_sales">
<button style="background:#ffc107;color:black;margin-bottom:20px;">
Download Sales Report (CSV)
</button>
</a>

<div class="dashboard-row">
<div class="dashboard-box">
<h4>Total Revenue</h4>
<p>₹{{ total_revenue }}</p>
</div>
<div class="dashboard-box">
<h4>Total Transactions</h4>
<p>{{ total_transactions }}</p>
</div>
</div>

<table>
<tr>
<th>ID</th>
<th>Product</th>
<th>Quantity</th>
<th>Total</th>
<th>Date</th>
<th>Action</th>
</tr>

{% for sale in sales %}
<tr>
<td>{{ sale[0] }}</td>
<td>{{ sale[1] }}</td>
<td>{{ sale[2] }}</td>
<td>₹{{ sale[3] }}</td>
<td>{{ sale[4] }}</td>
<td>
<form action="/delete_sale/{{ sale[0] }}" method="POST" style="display:inline;">
<button style="background:#ff4d4d;color:white;">Delete</button>
</form>

<a href="/invoice/{{ sale[0] }}">
<button style="background:#00c896;color:white;">Invoice</button>
</a>
</td>
</tr>
{% endfor %}
</table>

</div>
</body>
</html>